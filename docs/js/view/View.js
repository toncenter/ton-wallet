!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}({2:function(e,t,n){"use strict";function s(e){return document.querySelector(e)}function o(e,t){let n=t;!0===t&&(n="block"),!1===t&&(n="none"),e.style.display=n}function a(e){const t=document.createElement(e.tag);if(e.clazz)if(Array.isArray(e.clazz))for(let n of e.clazz)n&&t.classList.add(n);else t.classList.add(e.clazz);if(e.text&&(t.innerText=e.text),e.child)for(let n of e.child)n&&t.appendChild(n);if(e.style)for(let n in e.style)t.style[n]=e.style[n];return t}function i(e,t){return e.innerHTML="",e.appendChild(document.createTextNode(t.substring(0,t.length/2))),e.appendChild(document.createElement("wbr")),e.appendChild(document.createTextNode(t.substring(t.length/2))),e}function r(e){e.innerHTML=""}function c(e,t){e.addEventListener("change",t),e.addEventListener("input",t),e.addEventListener("cut",t),e.addEventListener("paste",t)}function d(e){return e<10?"0"+e:e}n.r(t);const l=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();var n=!1;try{n=document.execCommand("copy")?"successful":"unsuccessful"}catch(e){}return document.body.removeChild(t),n}var p={};function h(e){return new Promise((t,n)=>{const s=e.getAttribute("src"),o=e.getAttribute("data-name"),a=Number(e.getAttribute("width")),i=Number(e.getAttribute("height")),r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){const n=document.createElement("canvas");n.setAttribute("width",a*window.devicePixelRatio),n.setAttribute("height",i*window.devicePixelRatio),n.style.width=a+"px",n.style.height=i+"px",e.appendChild(n);const s=n.getContext("2d"),c=JSON.parse(new TextDecoder("utf-8").decode(pako.inflate(r.response)));p[o]={ctx:s,player:lottie.loadAnimation({renderer:"canvas",loop:"processing"===o||"start"===o||"about"===o,autoplay:!1,animationData:c,rendererSettings:{context:s,scaleMode:"noScale",clearCanvas:!0}})},s.clearRect(0,0,1e3,1e3),t()}else n()},r.open("GET",s,!0),r.send(null)})}async function m(){const e=(t="tgs-player",document.querySelectorAll(t));var t;for(let t=0;t<e.length;t++)await h(e[t])}class g{constructor(e,t,n){this.container=e,this.onEnter=t,this.mnemonicWords=n}show(e,t){r(this.container);const n=t=>{e.value=t.target.innerText,e.classList.remove("error"),this.hide(),t.preventDefault(),this.onEnter(e)};this.mnemonicWords.filter(e=>0===e.indexOf(t)).forEach(e=>{const t=a({tag:"div",clazz:"words-popup-item",text:e});t.addEventListener("mousedown",n),this.container.appendChild(t)}),this.selectedI=-1,this.container.children.length>0&&this.select(0),this.container.style.left=e.offsetLeft+"px",this.container.style.top=e.offsetTop+e.offsetHeight+"px",o(this.container,!0)}hide(){o(this.container,!1),r(this.container),this.selectedI=-1}select(e){if(this.selectedI>-1&&this.container.children[this.selectedI].classList.remove("selected"),this.selectedI=e,this.selectedI>-1){this.container.children[this.selectedI].classList.add("selected");const e=30;this.container.scrollTo(0,e*this.selectedI)}}getSelectedText(){return-1===this.selectedI?null:this.container.children[this.selectedI].innerText}up(){-1!==this.selectedI&&this.selectedI>0&&this.select(this.selectedI-1)}down(){-1!==this.selectedI&&this.selectedI<this.container.children.length-1&&this.select(this.selectedI+1)}}const v=TonWeb.utils.toNano,w=TonWeb.utils.fromNano,f=TonWeb.utils.BN;function L(e,t){t?e.player.play():(e.player.stop(),e.ctx.clearRect(0,0,1e3,1e3))}window.view=new class{constructor(e){function t(e){e.target.classList.remove("error")}this.mnemonicWords=e,this.controller=null,this.port=null,this.myAddress=null,this.balance=null,this.currentScreenName=null,this.isTestnet=!1,this.createImportInputs(),m().then(()=>{const e=p[this.currentScreenName];e&&L(e,!0)}),c(s("#amountInput"),t),c(s("#toWalletInput"),t),c(s("#createPassword_repeatInput"),t),c(s("#enterPassword_input"),t),c(s("#changePassword_oldInput"),t),c(s("#changePassword_newInput"),t),c(s("#changePassword_repeatInput"),t),s("#toWalletInput").addEventListener("paste",e=>{const t=function(e){const t=(e.clipboardData||window.clipboardData).getData("text");try{return decodeURI(t).replaceAll(/%23/g,"#")}catch(e){return t}}(e);if(t.startsWith("ton://transfer/")){if(63!==t.length&&"?"!==t[63])return void e.preventDefault();let n=t.substring("ton://transfer/".length);s("#toWalletInput").value=n.substring(0,48),n=n.substring(49),n.split("&").map(e=>e.split("=")).forEach(e=>{"amount"===e[0]?s("#amountInput").value=TonWeb.utils.fromNano(new f(e[1])):"text"===e[0]&&(s("#commentInput").value=e[1])}),e.preventDefault()}}),c(s("#invoice_amountInput"),()=>this.updateInvoiceLink()),c(s("#invoice_commentInput"),()=>this.updateInvoiceLink()),s("#start_createBtn").addEventListener("click",()=>this.sendMessage("showScreen",{name:"created"})),s("#start_importBtn").addEventListener("click",()=>this.sendMessage("showScreen",{name:"import"}));let n=!1;try{n=window.location.href.indexOf("ledgerReview")>-1}catch(e){}n&&o(s("#start_importLedgerHidBtn"),"inline-block"),s("#start_importLedgerHidBtn").addEventListener("click",()=>{this.showPopup("connectLedger"),this.sendMessage("showScreen",{name:"importLedger",transportType:"hid"})}),s("#import_alertBtn").addEventListener("click",()=>alert("Too Bad. Without the secret words, you can't restore access to your wallet.")),s("#import_continueBtn").addEventListener("click",async()=>this.sendMessage("import",{words:await this.getImportWords()})),s("#createdContinueButton").addEventListener("click",()=>this.sendMessage("createPrivateKey")),s("#backup_continueBtn").addEventListener("click",()=>this.sendMessage("onBackupDone")),s("#createPassword_continueBtn").addEventListener("click",()=>{const e=s("#createPassword_input").value,t=s("#createPassword_repeatInput").value;0===e.length&&!this.isTestnet?s("#createPassword_input").classList.add("error"):e!==t?s("#createPassword_repeatInput").classList.add("error"):this.sendMessage("passwordCreated",{password:e})}),s("#readyToGo_continueBtn").addEventListener("click",()=>this.sendMessage("showMain")),s("#main_refreshBtn").addEventListener("click",()=>{this.setUpdating(!0),this.sendMessage("update")}),s("#main_settingsButton").addEventListener("click",()=>this.onSettingsClick()),s("#main_receiveBtn").addEventListener("click",()=>{o(s("#receive_showAddressOnDeviceBtn"),!!this.isLedger),this.showPopup("receive")}),s("#sendButton").addEventListener("click",()=>this.onMessage("showPopup",{name:"send"})),s("#modal").addEventListener("click",()=>this.closePopup()),s("#menu_magic").addEventListener("click",()=>{s("#menu_magic .dropdown-toggle").classList.toggle("toggle-on");const e=s("#menu_magic .dropdown-toggle").classList.contains("toggle-on");s("#menu_telegram").classList.toggle("menu_telegram-show",e),this.sendMessage("onMagicClick",e)}),s("#menu_telegram").addEventListener("click",()=>{chrome.tabs.update({url:"https://web.telegram.org/z"})}),s("#menu_proxy").addEventListener("click",()=>{s("#menu_proxy .dropdown-toggle").classList.toggle("toggle-on"),this.sendMessage("onProxyClick",s("#menu_proxy .dropdown-toggle").classList.contains("toggle-on"))}),s("#menu_about").addEventListener("click",()=>this.showPopup("about")),s("#menu_changePassword").addEventListener("click",()=>this.onMessage("showPopup",{name:"changePassword"})),s("#menu_backupWallet").addEventListener("click",()=>this.sendMessage("onBackupWalletClick")),s("#menu_delete").addEventListener("click",()=>this.showPopup("delete")),s("#receive_showAddressOnDeviceBtn").addEventListener("click",()=>this.onShowAddressOnDevice()),s("#receive_invoiceBtn").addEventListener("click",()=>this.onCreateInvoiceClick()),s("#receive_shareBtn").addEventListener("click",()=>this.onShareAddressClick(!1)),s("#receive .addr").addEventListener("click",()=>this.onShareAddressClick(!0)),s("#receive_closeBtn").addEventListener("click",()=>this.closePopup()),s("#invoice_qrBtn").addEventListener("click",()=>this.onCreateInvoiceQrClick()),s("#invoice_shareBtn").addEventListener("click",()=>this.onShareInvoiceClick()),s("#invoice_closeBtn").addEventListener("click",()=>this.showPopup("receive")),s("#invoiceQr_shareBtn").addEventListener("click",()=>this.onShareInvoiceClick()),s("#invoiceQr_closeBtn").addEventListener("click",()=>this.showPopup("invoice")),s("#transaction_sendBtn").addEventListener("click",()=>this.onTransactionButtonClick()),s("#transaction_closeBtn").addEventListener("click",()=>this.closePopup()),s("#connectLedger_cancelBtn").addEventListener("click",()=>this.closePopup()),s("#send_btn").addEventListener("click",()=>{const e=Number(s("#amountInput").value),t=v(e);if(t.lte(0)||this.balance.lt(t))return void s("#amountInput").classList.add("error");const n=s("#toWalletInput").value;if(!TonWeb.Address.isValid(n))return void s("#toWalletInput").classList.add("error");const o=s("#commentInput").value;this.sendMessage("onSend",{amount:t.toString(),toAddress:n,comment:o})}),s("#send_closeBtn").addEventListener("click",()=>this.closePopup()),s("#sendConfirm_closeBtn").addEventListener("click",()=>this.closePopup()),s("#sendConfirm_cancelBtn").addEventListener("click",()=>this.closePopup()),s("#sendConfirm_okBtn").addEventListener("click",()=>this.onMessage("showPopup",{name:"enterPassword"})),s("#signConfirm_closeBtn").addEventListener("click",()=>this.closePopup()),s("#signConfirm_cancelBtn").addEventListener("click",()=>this.closePopup()),s("#signConfirm_okBtn").addEventListener("click",()=>this.onMessage("showPopup",{name:"enterPassword"})),s("#processing_closeBtn").addEventListener("click",()=>this.closePopup()),s("#done_closeBtn").addEventListener("click",()=>this.closePopup()),s("#about_closeBtn").addEventListener("click",()=>this.closePopup()),s("#changePassword_cancelBtn").addEventListener("click",()=>this.closePopup()),s("#changePassword_okBtn").addEventListener("click",async()=>{const e=s("#changePassword_oldInput").value,t=s("#changePassword_newInput").value,n=s("#changePassword_repeatInput").value;0!==t.length||this.isTestnet?t===n?this.sendMessage("onChangePassword",{oldPassword:e,newPassword:t}):s("#changePassword_repeatInput").classList.add("error"):s("#changePassword_newInput").classList.add("error")}),s("#enterPassword_cancelBtn").addEventListener("click",()=>this.closePopup()),s("#enterPassword_okBtn").addEventListener("click",async()=>{const e=s("#enterPassword_input").value;this.sendMessage("onEnterPassword",{password:e})}),s("#delete_cancelBtn").addEventListener("click",()=>this.closePopup()),s("#delete_okBtn").addEventListener("click",()=>this.sendMessage("disconnect"))}showScreen(e){this.closePopup();["start","created","backup","import","createPassword","readyToGo","main"].forEach(t=>{const n="main"===t?"flex":"block";o(s("#"+t),e===t&&n);const a=p[t];a&&L(a,e===t)}),this.currentScreenName=e,window.scrollTo(0,0)}showPopup(e){s("#enterPassword_input").value="",o(s("#modal"),""!==e);["receive","invoice","invoiceQr","send","sendConfirm","signConfirm","processing","done","menuDropdown","about","delete","changePassword","enterPassword","transaction","connectLedger"].forEach(t=>{o(s("#"+t),e===t);const n=p[t];n&&L(n,e===t)})}isPopupVisible(e){return"block"===s("#"+e).style.display}closePopup(){this.showPopup(""),this.sendMessage("onClosePopup")}setBackupWords(e){const t=t=>{s("#createWords").appendChild(a({tag:"div",clazz:"create-word-item",child:[a({tag:"span",clazz:"word-num",text:t+1+"."}),a({tag:"span",style:{"font-weight":"bold"},text:e[t]})]}))};r(s("#createWords"));for(let n=0;n<e.length/2;n++)t(n),t(n+12)}clearBackupWords(){r(s("#createWords"))}createImportInputs(){const e=e=>{const t=Number(e.getAttribute("tabindex"));24===t||s("#importInput"+t).focus()};this.importDropDown=new g(s("#wordsPopup"),e,this.mnemonicWords);let t=null;const n=e=>{const t=e.value;null!==t&&0!==t.length?this.importDropDown.show(e,t.toLowerCase()):o(s("#wordsPopup"),!1)};function i(e){const t=e.target;t.classList.remove("error"),n(t)}const r=e=>{const s=e.target;t=s,n(s)},d=e=>{if(o(s("#wordsPopup"),!1),t){const e=t.value.toLowerCase().trim();e.length>0&&-1===this.mnemonicWords.indexOf(e)?t.classList.add("error"):t.classList.remove("error")}},l=t=>{const n=t.target;switch(t.key){case"Enter":const t=this.importDropDown.getSelectedText();t&&(n.value=t,n.classList.remove("error"),this.importDropDown.hide()),e(n);break;case"ArrowUp":this.importDropDown.up();break;case"ArrowDown":this.importDropDown.down()}},u=e=>{const t=(e.clipboardData||window.clipboardData).getData("text");let n=t.split(" ");if(24!==n.length&&(n=t.split(",")),24===n.length){for(let e=0;e<24;e++){const t=s("#importInput"+e),o=n[e].toLowerCase().trim();o&&-1!==this.mnemonicWords.indexOf(o)?t.classList.remove("error"):t.classList.add("error"),t.value=o}e.preventDefault()}},p=e=>{const t=a({tag:"div",clazz:"word-item"}),n=a({tag:"span",clazz:"word-num",text:e+1+"."});t.appendChild(n);const o=a({tag:"input"});o.id="importInput"+e,o.type="text",o.tabIndex=e+1,t.appendChild(o),o.addEventListener("focusin",r),o.addEventListener("focusout",d),o.addEventListener("keydown",l),o.addEventListener("paste",u),c(o,i),s("#importWords").appendChild(t)};for(let e=0;e<12;e++)p(e),p(e+12)}clearImportWords(){o(s("#wordsPopup"),!1);for(let e=0;e<24;e++){const t=s("#importInput"+e);t.value="",t.classList.remove("error")}}async getImportWords(){let e=!0;const t=[];for(let n=0;n<24;n++){const o=s("#importInput"+n),a=o.value.toLowerCase().trim();a&&-1!==this.mnemonicWords.indexOf(a)||(o.classList.add("error"),e=!1),t.push(a)}if(e&&(e=await TonWeb.mnemonic.validateMnemonic(t),!e))for(let e=0;e<24;e++){s("#importInput"+e).classList.add("error")}return e?t:null}clearCreatePassword(){s("#createPassword_input").value="",s("#createPassword_repeatInput").value=""}clearChangePassword(){s("#changePassword_oldInput").value="",s("#changePassword_newInput").value="",s("#changePassword_repeatInput").value=""}setUpdating(e){s("#updateLabel").innerText=e?"updating..":"updated just now"}onSettingsClick(){o(s("#modal"),!0),o(s("#menuDropdown"),!0),o(s("#menu_changePassword"),!this.isLedger),o(s("#menu_backupWallet"),!this.isLedger)}clearBalance(){r(s("#balance")),s("#balance").innerText="💎",r(s("#transactionsList")),o(s("#walletCreated"),!1)}setBalance(e,t){this.balance=e;let n=w(e);"0"===n&&(n="0.00");const i=n.indexOf("."),c=n.substring(0,i),d=n.substring(i);r(s("#balance")),s("#balance").appendChild(a({tag:"span",text:c})),s("#balance").appendChild(a({tag:"span",style:{"font-size":"24px"},text:d})),s("#balance").appendChild(a({tag:"span",text:" 💎"})),s("#sendBalance").innerText="Balance: "+n+" 💎",o(s("#sendButton"),e.gt(new f(0))?"inline-block":"none"),this.setTransactions(t),this.setUpdating(!1)}setTransactions(e){r(s("#transactionsList"));let t="";o(s("#walletCreated"),0===e.length),e.forEach(e=>{e.amount=new f(e.amount),e.fee=new f(e.fee),e.otherFee=new f(e.otherFee),e.storageFee=new f(e.storageFee),e.date=new Date(e.date);const n=function(e){return l[e.getMonth()]+" "+e.getDate()}(e.date);t!==n&&(this.addDateSeparator(n),t=n),this.addTx(e)})}addDateSeparator(e){s("#transactionsList").appendChild(a({tag:"div",clazz:"date-separator",text:e}))}addTx(e){const t=!e.amount.isNeg(),n=w(e.amount),o=t?e.from_addr:e.to_addr,r=a({tag:"div",clazz:"tx-item",child:[a({tag:"div",child:t?[a({tag:"span",clazz:["tx-amount","tx-amount-green"],text:"+"+n}),a({tag:"span",text:" 💎"}),a({tag:"span",clazz:"tx-from",text:" from:"})]:[a({tag:"span",clazz:"tx-amount",text:n}),a({tag:"span",text:" 💎"}),a({tag:"span",clazz:"tx-from",text:" to:"})]}),i(a({tag:"div",clazz:["tx-addr","addr"]}),o),e.comment?a({tag:"div",clazz:"tx-comment",text:e.comment}):void 0,a({tag:"div",clazz:"tx-fee",text:`blockchain fees: ${w(e.fee)}`}),a({tag:"div",clazz:"tx-item-date",text:(c=e.date,d(c.getHours())+":"+d(c.getMinutes()))})]});var c;r.addEventListener("click",()=>this.onTransactionClick(e)),s("#transactionsList").appendChild(r)}onTransactionClick(e){this.showPopup("transaction");const t=!e.amount.isNeg(),n=t?e.from_addr:e.to_addr;this.currentTransactionAddr=n;const a=w(e.amount);s("#transactionAmount").innerText=(t?"+"+a:a)+" 💎",s("#transactionFee").innerText=w(e.otherFee)+" transaction fee",s("#transactionStorageFee").innerText=w(e.storageFee)+" storage fee",s("#transactionSenderLabel").innerText=t?"Sender":"Recipient",i(s("#transactionSender"),n),o(s("#transactionCommentLabel"),!!e.comment),s("#transactionComment").innerText=e.comment,s("#transactionDate").innerText=e.date.toString()}onTransactionButtonClick(){this.onMessage("showPopup",{name:"send",toAddr:this.currentTransactionAddr})}clearSend(){s("#toWalletInput").value="",s("#amountInput").value="",s("#commentInput").value=""}setMyAddress(e){i(s("#receive .addr"),e),r(s("#qr"));const t={text:"ton://transfer/"+e,width:185*window.devicePixelRatio,height:185*window.devicePixelRatio,logo:"assets/gem@large.png",logoWidth:44*window.devicePixelRatio,logoHeight:44*window.devicePixelRatio,correctLevel:QRCode.CorrectLevel.L};new QRCode(s("#qr"),t)}onShareAddressClick(e){const t=e?this.myAddress:"ton://transfer/"+this.myAddress,n=e?"Wallet address copied to clipboard":"Transfer link copied to clipboard";s("#notify").innerText=u(t)?n:"Can't copy link",o(s("#notify"),!0),setTimeout(()=>o(s("#notify"),!1),2e3)}onShowAddressOnDevice(){this.sendMessage("showAddressOnDevice"),s("#notify").innerText="Please check the address on your device",o(s("#notify"),!0),setTimeout(()=>o(s("#notify"),!1),2e3)}onCreateInvoiceClick(){this.onMessage("showPopup",{name:"invoice"})}updateInvoiceLink(){s("#invoice_link").innerText=this.getInvoiceLink()}getInvoiceLink(){let e="ton://transfer/"+this.myAddress;const t=[],n=s("#invoice_amountInput").value;n&&t.push("amount="+v(Number(n)));const o=s("#invoice_commentInput").value;return o&&t.push("text="+o),0===t.length?e:e+"?"+t.join("&")}onShareInvoiceClick(){s("#notify").innerText=u(this.getInvoiceLink())?"Transfer link copied to clipboard":"Can't copy link",o(s("#notify"),!0),setTimeout(()=>o(s("#notify"),!1),2e3)}onCreateInvoiceQrClick(){this.onMessage("showPopup",{name:"invoiceQr"})}drawInvoiceQr(e){r(s("#invoiceQrImg"));const t={text:e,width:185*window.devicePixelRatio,height:185*window.devicePixelRatio,logo:"assets/gem@large.png",logoWidth:44*window.devicePixelRatio,logoHeight:44*window.devicePixelRatio,correctLevel:QRCode.CorrectLevel.L};new QRCode(s("#invoiceQrImg"),t)}sendMessage(e,t){this.controller?this.controller.onViewMessage(e,t):this.port.postMessage({method:e,params:t})}onMessage(e,t){switch(e){case"disableCreated":s("#createdContinueButton").disabled=t;break;case"setIsTestnet":this.isTestnet=t,s(".your-balance").innerText=t?"Your testnet balance":"Your mainnet balance";break;case"setBalance":this.setBalance(new f(t.balance),t.txs);break;case"setIsLedger":this.isLedger=t;break;case"setIsMagic":const e=t;s("#menu_magic .dropdown-toggle").classList.toggle("toggle-on",e),s("#menu_telegram").classList.toggle("menu_telegram-show",e);break;case"setIsProxy":t?s("#menu_proxy .dropdown-toggle").classList.add("toggle-on"):s("#menu_proxy .dropdown-toggle").classList.remove("toggle-on");break;case"showChangePasswordError":s("#changePassword_oldInput").classList.add("error");break;case"showEnterPasswordError":s("#enterPassword_input").classList.add("error");break;case"showScreen":switch(this.showScreen(t.name),t.name){case"start":this.clearBalance();break;case"created":break;case"import":this.clearImportWords(),s("#importInput0").focus();break;case"backup":this.setBackupWords(t.words);break;case"createPassword":this.clearImportWords(),this.clearCreatePassword(),s("#createPassword_input").focus();break;case"readyToGo":this.clearCreatePassword();break;case"main":this.clearBackupWords(),t.myAddress&&(this.myAddress=t.myAddress,this.setMyAddress(t.myAddress))}break;case"showPopup":switch(this.showPopup(t.name),t.name){case"changePassword":this.clearChangePassword(),s("#changePassword_oldInput").focus();break;case"enterPassword":s("#enterPassword_input").focus();break;case"done":s("#done .popup-grey-text").innerText=t.message;break;case"invoice":s("#invoice_amountInput").value="",s("#invoice_commentInput").value="",this.updateInvoiceLink(),s("#invoice_amountInput").focus();break;case"invoiceQr":this.drawInvoiceQr(this.getInvoiceLink()),s("#invoiceQrAmount").innerText=s("#invoice_amountInput").value;break;case"send":this.clearSend(),t.toAddr&&(s("#toWalletInput").value=t.toAddr),o(s("#commentInput"),!this.isLedger),s("#toWalletInput").focus();break;case"sendConfirm":s("#sendConfirmAmount").innerText=w(new f(t.amount))+" TON",i(s("#sendConfirmAddr"),t.toAddress),s("#sendConfirmFee").innerText=t.fee?"Fee: ~"+w(new f(t.fee))+" TON":"",o(s("#sendConfirm .popup-footer"),!this.isLedger),o(s("#sendConfirm_closeBtn"),!this.isLedger);break;case"signConfirm":const e=t.data.length>48?t.data.substring(0,47)+"…":t.data;i(s("#signConfirmData"),e)}break;case"closePopup":this.closePopup()}}}(TonWeb.mnemonic.wordlists.EN);try{const e=chrome.runtime.connect({name:"gramWalletPopup"});window.view.port=e,e.onMessage.addListener((function(e){window.view.onMessage(e.method,e.params)}))}catch(e){}}});